# ============================================================================
# Stock Wizard â€” Wall Street quantitative stock analysis
# ============================================================================
name: "ðŸ§™ Stock Wizard"

on:
  workflow_call:
    inputs:
      query_args: { required: true, type: string }
      issue_number: { required: true, type: string }
  workflow_dispatch:
    inputs:
      query_args: { description: "Ticker or command (AAPL, compare AAPL MSFT, market)", required: true, type: string }
      issue_number: { description: "Issue to post to (0 = stdout)", default: "0", type: string }

jobs:
  run:
    uses: ./.github/workflows/python-agent-runner.yml
    with:
      agent_script: "stock_quant.py"
      enable_pattern: "stock-quant\\|stock_quant\\|stocks"
      query_args: ${{ inputs.query_args }}
      issue_number: ${{ inputs.issue_number || '0' }}
      memory_dir: "memory/stocks/"
      persist_msg: "ðŸ§™ Stock analysis"
      disabled_msg: "## ðŸ§™ Stock Wizard Not Enabled\n\nAdd `enable: stock-quant` to your `agent.md` and try again."
    secrets: inherit
