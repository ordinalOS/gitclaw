# ============================================================================
# Solana Query â€” On-chain data fetcher (Dexscreener, Jupiter, RPC)
# ============================================================================
name: "ğŸŒ Solana Query"

on:
  workflow_call:
    inputs:
      query_args: { required: true, type: string }
      issue_number: { required: true, type: string }
  workflow_dispatch:
    inputs:
      query_args: { description: "Query (price SOL, balance <addr>, quote SOL USDC 1)", required: true, type: string }
      issue_number: { description: "Issue to post to (0 = stdout)", default: "0", type: string }

jobs:
  run:
    uses: ./.github/workflows/python-agent-runner.yml
    with:
      agent_script: "solana_query.py"
      enable_pattern: "solana"
      query_args: ${{ inputs.query_args }}
      issue_number: ${{ inputs.issue_number || '0' }}
      memory_dir: "memory/solana/"
      persist_msg: "ğŸŒ Solana query"
      disabled_msg: "## ğŸŒ Solana Plugin Not Enabled\n\nAdd `enable: solana` to your `agent.md` and try again."
    secrets: inherit
